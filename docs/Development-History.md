# Lavis 开发历史与实现状态（历史参考）

> 本文档记录 Lavis 项目的阶段性开发历史与实现状态，供贡献者理解“为什么会是现在这样”。

**最后更新**：2026-01-29

---

## 范围说明

本文档偏“历史记录/决策与实现结果”，不作为用户/开发者的主入口。

- 用户与开发者入口请看：`docs/README.md` 与 `docs/INDEX.md`
- 当前架构请看：`docs/ARCHITECTURE.md`

---

## ✅ 已完成模块（摘要）

### 1) 最终步骤语音播报（Voice Announcement）

- **目标**：计划完成时提供简短语音反馈；仅最终步骤触发，避免打扰
- **结果**：已实现（后端推送文本事件，前端按需调用 TTS 并播放）

### 2) 前端窗口形态与交互

- **目标**：听觉唤醒、视觉克制；Mini/Expanded 等状态切换
- **结果**：已实现（Capsule + 状态机 + Electron 尺寸切换）

### 3) 全链路内存安全

- **目标**：支持长时间运行，避免 OOM/渲染卡死
- **结果**：已实现（图片清理、上下文压缩、会话持久化、前端虚拟滚动等）

---

## 详细记录（保留原始历史内容）

以下内容来自早期开发记录，按当时写法保留，仅做少量“路径/术语”修正。

### ✅ 1. 后端：最终步骤语音播报

在任务计划全部完成时（最终步骤），向前端推送简短语音反馈，通知用户任务已完成，同时确保不阻塞自动化任务执行速度。

### ✅ 2. 前端：Electron 窗口形态与交互

实现“听觉唤醒，视觉克制”。语音唤醒时不直接占据屏幕，仅通过胶囊组件动效反馈，减少对用户干扰。

### ✅ 3. 全链路内存安全策略

覆盖浏览器端、Electron 进程通信及 Java 后端堆内存：音频资源及时释放、DOM 虚拟化、截图与上下文淘汰等。


