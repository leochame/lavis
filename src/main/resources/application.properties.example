# ====================================
# Lavis - macOS AI Agent Configuration
# ====================================
# 
# 使用说明：
# 1. 复制此文件为 application.properties
# 2. 填写你的 API Key 和配置信息
# 3. application.properties 已在 .gitignore 中，不会被提交到仓库
#
# ====================================

spring.application.name=lavis

# Server
server.port=8080

app.llm.default-model=modela
app.llm.default-stt-model=whisper
app.llm.default-tts-model=tts


app.llm.models.modela.provider=OPENAI
app.llm.models.modela.base-url=https://dashscope.aliyuncs.com/compatible-mode/v1
app.llm.models.modela.api-key=${MODELA_API_KEY:your-modela-api-key-here}
app.llm.models.modela.model-name=qwen3-omni-flash
app.llm.models.modela.temperature=0.4
app.llm.models.modela.timeout-seconds=180
app.llm.models.modela.max-retries=3

app.llm.models.modelb.provider=GEMINI
app.llm.models.modelb.api-key=${GEMINI_KEY:}
app.llm.models.modelb.model-name=gemini-2.0-flash
app.llm.models.modelb.temperature=0.4
app.llm.models.modelb.timeout-seconds=60
app.llm.models.modelb.max-retries=3

app.llm.models.modelc.provider=OPENAI
app.llm.models.modelc.base-url=https://dashscope.aliyuncs.com/compatible-mode/v1
app.llm.models.modelc.api-key=${MODELC_API_KEY:your-modelc-api-key-here}
app.llm.models.modelc.model-name=qwen3-omni-flash-realtime-2025-12-01
app.llm.models.modelc.temperature=0.4
app.llm.models.modelc.timeout-seconds=60
app.llm.models.modelc.max-retries=3

# ====================================
# Voice: STT (Speech-to-Text) - Whisper
# ====================================
# 支持 OpenAI Whisper 或兼容接口
# 设置环境变量 OPENAI_API_KEY 或直接填写 API Key
app.llm.models.whisper.type=STT
app.llm.models.whisper.provider=OPENAI
app.llm.models.whisper.api-key=${WHISPER_API_KEY:your-whisper-api-key-here}
app.llm.models.whisper.model-name=qwen3-asr-flash
app.llm.models.whisper.timeout-seconds=60

# ====================================
# Voice: TTS (Text-to-Speech)
# ====================================
app.llm.models.tts.type=TTS
app.llm.models.tts.provider=OPENAI
app.llm.models.tts.api-key=${TTS_API_KEY:your-tts-api-key-here}
app.llm.models.tts.model-name=qwen3-tts-flash
app.llm.models.tts.voice=Cherry
app.llm.models.tts.format=mp3
app.llm.models.tts.timeout-seconds=60


# ====================================
# Agent Configuration
# ====================================
# Agent 使用的模型别名（对应 app.llm.models.* 中的 key）
agent.model.alias=modela
# 重试配置
agent.retry.max=3
agent.retry.delay.ms=2000
agent.max.tool.iterations=30

# Planner 和 Executor 可以使用不同的模型（留空则使用 agent.model.alias）
# planner.model.alias=modela
# executor.model.alias=executor

# 【关键】工具执行后等待 UI 响应的时间（毫秒）
# 这个时间需要足够长，让屏幕变化完成后再截图
# 建议至少 1000ms，以等待动画、网络请求完成
agent.tool.wait.ms=1000

# 反思循环配置
reflection.max.iterations=5
reflection.delay.ms=1000

# ====================================
# Micro-Executor Configuration
# ====================================
# 每个步骤的最大修正次数
executor.max.corrections=5
# 单步操作超时时间（秒）
executor.action.timeout.seconds=30
# 【关键】工具执行后等待 UI 响应的时间（毫秒）
# 反思阶段需要截取"操作后"的屏幕，必须等待动画/网络完成
# 建议至少 1000ms，复杂页面可能需要更长
executor.tool.wait.ms=1000

# ====================================
# Screenshot Configuration  
# ====================================
# 截图压缩宽度 (降低可减少 token 消耗)
screenshot.target.width=1280
# 截图质量 (0.0-1.0)
screenshot.quality=1.0

# ====================================
# Logging
# ====================================
logging.level.com.lavis=INFO
logging.level.dev.langchain4j=WARN
logging.pattern.console=%d{HH:mm:ss} %clr(%-5level) %cyan(%logger{20}) - %msg%n

# ====================================
# JavaFX
# ====================================
spring.main.allow-bean-definition-overriding=true

# ====================================
# Gemini Computer Use Configuration
# (https://ai.google.dev/gemini-api/docs/computer-use)
# ====================================
# Computer Use 专用模型
gemini.computer.use.model=gemini-2.5-computer-use-preview-10-2025
# 最大迭代次数
gemini.computer.use.max.iterations=30
# 保留最近N轮的截图（减少 token 消耗）
gemini.computer.use.max.screenshots=3
# 默认浏览器
computer.use.default.browser=Google Chrome
# 操作后延迟（毫秒）
computer.use.action.delay.ms=300
